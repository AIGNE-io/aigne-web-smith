# ご自身のウェブサイトに公開する

このガイドでは、生成されたウェブサイトコンテンツを、ご自身が所有する既存のウェブサイトインフラストラクチャに直接公開するための体系的な手順を説明します。この方法は、ご自身の ArcBlock ベースのウェブサイトを管理しており、AIGNE WebSmith によって生成されたコンテンツを統合したいユーザーを対象としています。

カスタムウェブサイトへの公開により、ホスティングと統合を完全に制御できます。続行する前に、既存のウェブサイトに互換性があり、適切に設定されていることを確認してください。

## 前提条件

ご自身のウェブサイトに正常に公開するには、以下の条件を満たす必要があります。

1.  **生成済みのウェブサイト:** `aigne web generate` コマンドを使用して、ウェブサイトのページをすでに生成している必要があります。生成されたコンテンツは、プロジェクトの出力ディレクトリに存在している必要があります。
2.  **ArcBlock ベースのウェブサイト:** 公開先のウェブサイトは、実行中の Blocklet アプリケーションである必要があります。AIGNE WebSmith は Blocklet Server 環境と直接統合します。
3.  **必須コンポーネント:** **Pages Kit** コンポーネントが公開先のウェブサイトにインストールされ、実行されている必要があります。このコンポーネントは、AIGNE WebSmith がコンテンツをアップロードおよび管理するために必要な API を提供します。

ウェブサイトがまだセットアップされていない場合は、Blocklet Store から必要なコンポーネントを入手できます：
*   [ウェブサイトに Pages Kit をインストールする](https://store.blocklet.dev/blocklets/z8ia29UsENBg6tLZUKi2HABj38Cw1LmHZocbQ)

## 公開プロセス

公開プロセスには、コマンドの実行、適切なオプションの選択、ウェブサイトの URL の提供、そして AIGNE WebSmith CLI がサイトに接続するための承認が含まれます。

### ステップ 1: 公開コマンドの開始

プロジェクトディレクトリからターミナルで `publish` コマンドを実行して、プロセスを開始します。

```bash コマンドライン icon=lucide:terminal
aigne web publish
```

### ステップ 2: 公開オプションの選択

いくつかの公開オプションが表示されます。矢印キーを使用して **「Your existing website」** をハイライトして選択します。

```text 公開オプション
? Select platform to publish your pages:
  WebSmith Cloud (https://websmith.ai) – 無料ホスティング。ページは一般公開されます。オープンソースプロジェクトやコミュニティでの共有に最適です。
❯ ご自身の既存のウェブサイト - 現在のサイトに直接統合して公開します（セットアップが必要）
  新規の専用ウェブサイト - 有料サービス。プロフェッショナル向けにカスタムドメインとホスティングで新しいウェブサイトを作成します。
```

### ステップ 3: ウェブサイト URL の提供

カスタムオプションを選択した後、ウェブサイトの URL を入力するよう求められます。

```text URL を入力
? Please enter your website URL:
› https://my-awesome-site.com
```

Pages Kit コンポーネントがインストールされているウェブサイトの完全な URL を入力し、Enter キーを押します。

### ステップ 4: CLI の承認

新しいウェブサイトへの最初の接続では、CLI がコンテンツを公開するためにあなたの承認を必要とします。これはウェブサイトごとに一度だけ行う設定プロセスです。

1.  **ブラウザ認証:** デフォルトのウェブブラウザが自動的に開き、CLI を接続して承認するためのページが表示されます。
2.  **ログイン:** DID ウォレットを使用してウェブサイトにログインするよう求められます。
3.  **接続の承認:** ログイン後、「AIGNE WebSmith」からのサイトへのアクセス要求を承認する必要があります。この要求では、ページを管理するための権限が求められます。

承認されると、安全なアクセストークンが生成され、ホームディレクトリ（`~/.aigne/web-smith-connected.yaml`）にローカルで保存されます。このトークンは、この特定の URL への後続のすべての公開操作で使用されるため、承認ステップを繰り返す必要はありません。

### ステップ 5: 確認を待つ

承認後、CLI は次の処理に進みます：
1.  生成されたページファイルとアセットをバンドルします。
2.  参照されているすべてのメディアファイルをアップロードします。
3.  ページコンテンツをウェブサイトに公開します。

正常に完了すると、新しく公開されたページのライブ URL を含む確認メッセージがターミナルに表示されます。

```text 成功メッセージ
✅ ページが正常に公開されました！ (`5/5` ページ, `12` メディアアセット)

🔗 ライブ URL:
   https://my-awesome-site.com/docs/
   https://my-awesome-site.com/docs/introduction
   https://my-awesome-site.com/docs/getting-started
   https://my-awesome-site.com/docs/api-reference
   https://my-awesome-site.com/docs/contact

💡 オプション: 特定のページを更新（`aigne web update`）するか、ウェブサイトの構造を調整（`aigne web generate`）します
```

## トラブルシューティング

公開プロセス中にエラーが発生した場合は、以下の一般的な問題を参照してください。

*   **エラー: 「The provided URL is not a valid website on ArcBlock platform」**
    *   **原因:** 入力した URL が有効な Blocklet アプリケーションを指していません。
    *   **解決策:** URL が正しく、ウェブサイトが実行中であることを確認してください。正しいプロトコル（例：`https://`）を含めていることを確認してください。

*   **エラー: 「This website does not have required components for publishing」**
    *   **原因:** 公開先のウェブサイトは有効な Blocklet ですが、必須の「Pages Kit」コンポーネントがありません。
    *   **解決策:** ウェブサイトに Pages Kit コンポーネントをインストールしてください。手順は[こちら](https://www.arcblock.io/docs/blocklet-development/en/add-components)で確認できます。

*   **エラー: 「Unable to connect」または「Failed to obtain access token」**
    *   **原因:** これは通常、ネットワークの問題、またはターゲットサーバーが利用できないことを示します。ブラウザで承認要求を拒否した場合にも発生することがあります。
    *   **解決策:** インターネット接続を確認し、ウェブサイトの URL が正しくアクセス可能であることを確認してから、`aigne web publish` コマンドを再実行し、承認要求を必ず承認してください。

---

公開が成功したら、コンテンツをさらに管理できます。既存のページに変更を加えるには、[ウェブサイトコンテンツの更新](./core-tasks-updating-website-content.md)を参照してください。