type: team
name: generateComponentLibrary
description: 分析多个中间格式 YAML 文件生成组件库
skills:
  - type: ai
    name: generateComponentLibrary
    instructions:
      url: ../../../prompts/generate/component-library/generate-component-library.md
    output_schema:
      type: object
      properties:
        componentLibrary:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                description: 组件名称
              summary:
                type: string
                description: 组件的用途和特点，尽可能具体，如果是复合组件，需要说明布局特征
              type:
                type: string
                description: 组件类型 atomic（原子组件）或 composite（复合组件）
              componentId:
                type: string
                description: 组件ID（原子组件需要记录真实的组件 ID，复合组件使用随机生成的 ID）
              fieldCombinations:
                type: array
                items:
                  type: string
                description: 组件处理的字段组合
              relatedComponents:
                type: array
                items:
                  type: object
                  properties:
                    componentId:
                      type: string
                      description: 关联的原子组件的 ID
                    fieldCombinations:
                      type: array
                      items:
                        type: string
                        description: 关联的原子组件使用的字段组合
                      description: 复合组件关联的原子组件内容，标记 componentId 为原子组件 ID，fieldCombinations 为原子组件使用的字段组合
  - ./save-component-library.mjs
reflection:
  reviewer: ./validate-component-library.mjs
  is_approved: isApproved
  max_iterations: 3
  return_last_on_max_iterations: true
task_title: Generate component library
mode: sequential
