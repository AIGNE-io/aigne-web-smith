type: team
name: generateComponentLibrary
description: Analyze all page content to generate component library
skills:
  - type: ai
    name: generateComponentLibrary
    instructions:
      url: ../../../prompts/generate/component-library/generate-component-library.md
    output_schema:
      type: object
      properties:
        componentLibrary:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
                description: Component name
              summary:
                type: string
                description: Component purpose and characteristics, as specific as possible. For composite components, layout features should be described
              type:
                type: string
                description: Component type, either "atomic" (atomic component) or "composite" (composite component)
              componentId:
                type: string
                description: Component ID (atomic components must use real ComponentId, composite components use randomly generated ID)
              fieldCombinations:
                type: array
                items:
                  type: string
                description: FieldCombinations handled by the component
              relatedComponents:
                type: array
                items:
                  type: object
                  properties:
                    componentId:
                      type: string
                      description: ID of the related atomic component
                    fieldCombinations:
                      type: array
                      items:
                        type: string
                        description: FieldCombinations used by the related atomic component
                      description: Content of atomic components related to composite component, where componentId is the atomic component ID, and fieldCombinations are the fieldCombinations used by the atomic component
  - ./save-component-library.mjs
reflection:
  reviewer: ./validate-component-library.mjs
  is_approved: isApproved
  max_iterations: 3
  return_last_on_max_iterations: true
task_title: Generate component library
mode: sequential
