name: analyzeComponentPatterns
description: 分析中间格式文件，只提取字符串字段的组件模式和映射关系，生成纯净的组件库定义（排除数组字段）
instructions:
  url: ../../prompts/pages-format/@analyze-component-patterns.md
input_schema:
  type: object
  properties:
    middleFormatFiles:
      type: array
      description: 中间格式YAML文件内容数组
      items:
        type: object
        properties:
          filePath:
            type: string
            description: 文件路径
          content:
            type: string
            description: 文件内容
        required:
          - filePath
          - content
    allFieldCombinations:
      type: array
      description: 所有字段组合
      items:
        type: array
        items:
          type: string
  required:
    - middleFormatFiles
    - allFieldCombinations
output_schema:
  type: object
  properties:
    componentLibrary:
      type: array
      description: 纯净的组件库定义数组，只包含字符串字段的组件模式，不包含数组字段处理
      default: []
      items:
        type: object
        properties:
          name:
            type: string
            description: 组件名称
          type:
            type: string
            description: 组件类型 "atomic" （原子组件） 或 "composite"（复合组件）
          summary:
            type: string
            description: 组件的用途和特点，尽可能具体，如果是复合组件，需要说明布局特征
          componentId:
            type: string
            description: 组件ID（原子组件需要记录真实的组件 ID，复合组件使用随机生成的 ID）
          fieldCombinations:
            type: array
            description: 该组件最适合处理的字符串字段组合（单一数组，不包含数组类型字段）
            items:
              type: string
          relatedComponents:
            type: array
            description: 相关组件 ID（仅复合组件需要），如果是原子组件则为 [] 空数组
            items:
              type: object
              properties:
                componentId:
                  type: string
                  description: 子组件的 ID
                fieldCombinations:
                  type: array
                  description: 子组件能使用的字段组合
                  items:
                    type: string
              default: []
        required:
          - name
          - type
          - fieldCombinations
required:
  - componentLibrary
