type: team
name: pagesFormatParser
description: 智能转换中间格式为Pages Kit YAML并验证，职责分离：AI负责语义分析，工具负责ID生成和格式组装，最后上传到Pages Kit进行验证
skills:
  - ./load-middle-format.mjs
  - ./middle-format-to-structured-data.yaml
  - ./assemble-pages-kit-yaml.mjs
  - ./save-pages-kit-yaml.mjs
# 调试时候，先禁用反思工作流
# reflection:
#   reviewer: ./pages-kit-format-validator.mjs
#   is_approved: isValid
#   max_iterations: 3
#   return_last_on_max_iterations: true
input_schema:
  type: object
  properties:
    nodeName:
      type: string
      description: 节点名称
      default: Section
    locale:
      type: string
      description: 语言
    targetAudience:
      type: string
      description: 目标受众
    glossary:
      type: string
      description: 术语表
    pagePath:
      type: string
      description: 当前路径
    feedback:
      type: string
      description: 反馈
    sources:
      type: array
      items:
        type: string
        description: 源码路径
    sourcesPath:
      type: array
      items:
        type: string
        description: 源码路径
      default:
        - ./
    includePatterns:
      type: array
      items:
        type: string
        description: 包含的文件名
    excludePatterns:
      type: array
      items:
        type: string
        description: 排除的文件名
    outputDir:
      type: string
      description: 输出目录
      default: ./aigne-pages/output
    pagesDir:
      type: string
      description: 页面目录
      default: ./aigne-pages/pages
    additionalInformation:
      type: string
      description: 额外补充信息
output_schema:
  type: object
  properties:
    title:
      type: string
    description:
      type: string
    path:
      type: string
    content:
      type: string
    pagesKitYaml:
      type: string
      description: 生成的 Pages Kit YAML 内容
    uploadResult:
      description: Pages Kit 上传结果
    uploadStatus:
      type: string
      description: 上传状态（success/failed）
    uploadError:
      type: string
      description: 上传错误信息（如果失败）
# Commented out old output_schema:
#   type: object
#   properties:
#     title:
#       type: string
#     description:
#       type: string
#     path:
#       type: string
#     content:
#       type: string
mode: sequential
