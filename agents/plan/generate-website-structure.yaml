type: team
name: generateWebsiteStructure
description: The website structure generator, using rules and datasources to generate website structure
task_render_mode: collapse
skills:
  - type: ai
    model:
      reasoning_effort: 500
    instructions:
      - role: system
        url: ../../prompts/plan/system-prompt.md
      - role: user
        url: ../../prompts/plan/user-prompt.md
    input_schema:
      type: object
      properties:
        rules:
          type: string
          description: User configuration rules
        locale:
          type: string
          description: User language, e.g. zh, en
        datasources:
          type: string
          description: Context for website structure
        glossary:
          type: string
          description: Glossary of terms
        feedback:
          type: string
          description: Feedback for website structure
        userPreferences:
          type: string
          description: User preference rules, YAML format for website structure and global preferences
      required:
        - rules
        - datasources
    output_schema:
      type: object
      required:
        - projectCoverPrompt
        - websiteStructure
      properties:
        projectName:
          type: string
          description: Project name analyzed from datasources, should be the original project name
        projectDesc:
          type: string
          description: Project description generated from datasources analysis, concise description under 50 words
        projectCoverPrompt:
          type: string
          description: |
            Project cover prompt generated from datasources analysis:
              - Describe the core content of the project through abstract concepts
              - Only describe in detail the main subjects planned to be shown in the image and their positional relationships

        websiteStructure: ../schema/website-structure.yaml
        websiteStructureTree:
          type: string
          description: |
            Tree structure of website structure, showing hierarchical relationships

# reflection:
#   reviewer: validate-website-structure.yaml
#   is_approved: isValid
#   max_iterations: 3
#   return_last_on_max_iterations: true
