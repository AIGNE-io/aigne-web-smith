type: team
name: updateWebsiteStructure
description: Update website structure based on user feedback and intentions using structure modification tools
task_render_mode: collapse
skills:
  - url: ../utils/analyze-feedback-intent.yaml
  - url: ../utils/map-reasoning-effort-level.mjs
    default_input:
      level: low

  - type: ai
    catch_tools_error: false
    instructions:
      - role: system
        url: ../../prompts/plan/update-website-structure-system.md
      - role: user
        url: ../../prompts/plan/update-website-structure-user.md
    input_schema:
      type: object
      properties:
        websiteStructure:
          type: array
          description: Current website structure to be updated
        rules:
          type: string
          description: User configuration rules
        locale:
          type: string
          description: User language, e.g. zh, en
        datasources:
          type: string
          description: Context for website structure
        glossary:
          type: string
          description: Glossary of terms
        feedback:
          type: string
          description: User feedback for structure modifications
        userPreferences:
          type: string
          description: User preference rules, YAML format for website structure and global preferences
        needDataSources:
          type: boolean
          description: Whether data sources are needed for content modifications
      required:
        - websiteStructure
        - feedback
    output_key: message
    skills:
      - ./website-structure-tools/add-page.mjs
      - ./website-structure-tools/delete-page.mjs
      - ./website-structure-tools/update-page.mjs
      - ./website-structure-tools/move-page.mjs
