type: team
name: userAddPage
description: Add pages to website structure
skills:
  - url: ../../init/index.mjs
    default_input:
      skipIfExists: true
  - ../../utils/load-config.mjs
  - ../../utils/load-sources.mjs
  - ./add-pages-to-structure.mjs
  - url: ../../utils/save-output.mjs
    default_input:
      saveKey: websiteStructure
      savePath:
        $get: tmpDir
      fileName: website-structure.yaml
  - ../../utils/transform-website-structure.yaml
  - ../../utils/format-website-structure.mjs
  - url: ../../utils/normalize-website-structure.mjs
    default_input:
      key: newPages
  - ../../media/load-media-description.mjs
  - type: team
    skills:
      - ../../generate/page-detail/analyze-page-detail.mjs
    iterate_on: newPages
    concurrency: 6
  - url: ../../utils/normalize-website-structure.mjs
    default_input:
      key: newPages
  - ../../utils/reload-generate-media.mjs
  - ./find-pages-to-add-links.yaml
  - ./review-pages-with-new-links.mjs
  - type: team
    name: batchAddLinks
    skills:
      - ./add-links-to-pages.mjs
      - ../../utils/save-single-page.mjs
    iterate_on: pagesWithNewLinks
    concurrency: 6
  - ../../generate/page-detail/load-page-detail.mjs
  - ./merge-pages-with-translations.mjs
  - type: team
    name: batchTranslatePageDetail and analyzeTranslateNavigations
    skills:
      - url: ../../translate/page-detail/batch-translate-page-detail.yaml
        default_input:
          skipIfExists: false
      - ../../translate/navigations/analyze-translate-navigations.mjs
    mode: parallel
  - ../../generate/page-data/compose-pages-data.mjs
  - ../../utils/save-pages.mjs
  - ./print-add-page-summary.mjs
mode: sequential
