type: team
name: userRemovePage
description: Remove pages from website structure
skills:
  - url: ../../init/index.mjs
    default_input:
      skipIfExists: true
  - ../../utils/load-config.mjs
  - ../../utils/load-sources.mjs
  - ./remove-pages-from-structure.mjs
  - ../../utils/format-website-structure.mjs
  - ./find-pages-with-invalid-links.mjs
  - type: team
    name: batchRemoveInvalidLinks
    skills:
      - ./remove-invalid-links-from-page.mjs
      - ../../utils/save-single-page.mjs
    iterate_on: pagesWithInvalidLinks
  - ../../generate/page-detail/load-page-detail.mjs
  - type: transform
    jsonata: |
      $merge([
        $,
        {
          "selectedPages": pagesWithInvalidLinks
        }
      ])
  - url: ../../translate/page-detail/batch-translate-page-detail.yaml
    default_input:
      skipIfExists: false
  - ../../generate/page-data/compose-pages-data.mjs
  - url: ../../clear/clear-generated-pages.mjs
    default_input:
      pages:
        $get: deletedPages
  - ./save-structure-after-removal.mjs
  - ../../translate/navigations/analyze-translate-navigations.mjs
  - ../../utils/save-pages.mjs
mode: sequential
