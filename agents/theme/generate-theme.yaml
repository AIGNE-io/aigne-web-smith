type: ai
name: generateTheme
description: Generate comprehensive MUI theme configuration based on website style context
instructions: |
  {% if shouldGenerate %}
  You are a professional UI/UX Design Expert specializing in Material-UI theme configuration and visual design systems.

  Your goal is to generate comprehensive MUI theme configurations based on website style descriptions, creating cohesive color palettes and typography systems that align with the site's purpose and target audience.

  Processing workflow:

  - Analyze website style context: Extract key design elements from <website_style_context> including purpose, audience, and visual preferences
  - Apply design knowledge: Use <theme_design_knowledge> to make informed decisions about colors and typography
  - Define color strategy: Create harmonious color palettes for both light and dark modes based on style requirements
  - Select typography: Choose appropriate Google Fonts that match the website's tone and readability needs
  - Generate theme configuration: Output complete MUI theme structure with proper color tokens and font families
  - Validate consistency: Ensure all color combinations meet accessibility standards and visual harmony

  <theme_design_knowledge>
  {% include "../../../prompts/generate/theme/theme-design-knowledge.md" %}
  </theme_design_knowledge>

  <website_style_context>
  Website Purpose: {{pagePurpose}}
  Target Audience: {{targetAudience}}
  Website Scale: {{websiteScale}}
  Custom Rules: {{rules}}
  </website_style_context>

  Theme Configuration Requirements:

  - Output complete theme configuration in JSON format with proper structure
  - Must include all required fields: `name`, `light`, `dark`, `fonts`, `metadata`
  - Color values must be valid hex codes (e.g., "#0077B6")
  - Font families must be valid Google Fonts names only

  Design Guidelines:

  - Use theme design knowledge to inform color and typography choices
  - Ensure colors reflect website purpose and target audience
  - Maintain accessibility standards (WCAG AA contrast ratios)
  - Choose fonts that enhance readability and brand personality
  - Font selection: Must be from Google Fonts library only
  {% else %}
  A cached theme was found and will be used instead of generating a new one.
  The cached theme is: {{cachedTheme.name}}
  Generated at: {{cachedTheme.metadata.generatedAt}}
  
  Theme details:
  - Primary colors: Light {{cachedTheme.light.primary}}, Dark {{cachedTheme.dark.primary}}
  - Font families: Heading {{cachedTheme.fonts.heading.fontFamily}}, Body {{cachedTheme.fonts.body.fontFamily}}
  
  This theme will be used for the website generation.
  {% endif %}
output_schema:
  type: object
  properties:
    name:
      type: string
      description: Theme name
    light:
      type: object
      properties:
        primary:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Primary color in hex format
        secondary:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Secondary color in hex format
        success:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Success color in hex format
        error:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Error color in hex format
        info:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Info color in hex format
        warning:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Warning color in hex format
        background:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Background color in hex format
        surface:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Surface color in hex format
        text:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Text color in hex format
      required:
        - primary
        - secondary
        - success
        - error
        - info
        - warning
        - background
        - surface
        - text
    dark:
      type: object
      properties:
        primary:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Primary color in hex format
        secondary:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Secondary color in hex format
        success:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Success color in hex format
        error:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Error color in hex format
        info:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Info color in hex format
        warning:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Warning color in hex format
        background:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Background color in hex format
        surface:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Surface color in hex format
        text:
          type: string
          pattern: "^#[0-9A-Fa-f]{6}$"
          description: Text color in hex format
      required:
        - primary
        - secondary
        - success
        - error
        - info
        - warning
        - background
        - surface
        - text
    fonts:
      type: object
      properties:
        heading:
          type: object
          properties:
            fontFamily:
              type: string
              description: Google Font family name for headings
          required:
            - fontFamily
        body:
          type: object
          properties:
            fontFamily:
              type: string
              description: Google Font family name for body text
          required:
            - fontFamily
      required:
        - heading
        - body
    metadata:
      type: object
      properties:
        generatedAt:
          type: string
          format: date-time
          description: Timestamp when theme was generated
        version:
          type: string
          description: Theme version
        description:
          type: string
          description: Theme description
      required:
        - generatedAt
        - version
        - description
  required:
    - name
    - light
    - dark
    - fonts
    - metadata
