type: team
name: update
alias:
  - up
description: Optimize and regenerate individual page content and translations
skills:
  - url: ../init/index.mjs
    default_input:
      skipIfExists: true
  - ../utils/load-config.mjs
  - ../utils/load-sources.mjs
  - ../utils/transform-website-structure.yaml
  - ../utils/format-website-structure.mjs
  - ../utils/choose-pages.mjs
  - type: team
    name: generatePageDetailTeam(selectedPages)
    skills:
      - ./generate-page-detail-team.yaml
    iterate_on: selectedPages
    concurrency: 10
  - url: ../utils/check-feedback-refiner.mjs
    default_input:
      stage: page_refine
  # re-trigger generate agent
  - url: ../generate/index.yaml

input_schema:
  type: object
  properties:
    glossary:
      type: string
      description: Glossary of terms for consistent terminology, use @<file> to read from a file
    pages:
      type: array
      items:
        type: string
      description: Page paths to translate
    feedback:
      type: string
      description: Feedback for content improvement
output_schema:
  type: object
  properties:
    title:
      type: string
    description:
      type: string
    path:
      type: string
    content:
      type: string
mode: sequential
