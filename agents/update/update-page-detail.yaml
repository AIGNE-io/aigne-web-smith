type: team
name: updatePageDetail
description: Update page detail content based on user feedback and intentions using content modification tools
task_render_mode: collapse
skills:
  - url: ../utils/analyze-feedback-intent.yaml
  - url: ../utils/map-reasoning-effort-level.mjs
    default_input:
      level: low

  - type: ai
    instructions:
      - role: system
        url: ../../prompts/update/page-detail/system-prompt.md
      - role: user
        url: ../../prompts/update/page-detail/user-prompt.md
    catch_tools_error: false
    input_schema:
      type: object
      properties:
        pageDetail:
          type: string
          description: Current page detail YAML string to be updated
        rules:
          type: string
          description: User's website structure requirements
        locale:
          type: string
          description: User language, such as zh, en
        datasources:
          type: string
          description: Global context for assisting detail generation
        originalWebsiteStructure: ../schema/website-structure.yaml
        title:
          type: string
        description:
          type: string
        path:
          type: string
        parentId:
          type:
            - string
            - "null"
        glossary:
          type: string
          description: Glossary
        additionalInformation:
          type: string
          description: Additional supplementary information
        fieldConstraints:
          type: string
          description: Dynamic field usage constraints based on component library
        feedback:
          type: string
          description: User feedback for page detail modifications
        userPreferences:
          type: string
          description: User preference rules, YAML format for page detail and global preferences
        needDataSources:
          type: boolean
          description: Whether data sources are needed for content modifications
      required:
        - pageDetail
        - rules
        - datasources
        - feedback
    output_key: message
    skills:
      - ./page-detail-tools/update-meta.mjs
      - ./page-detail-tools/add-section.mjs
      - ./page-detail-tools/delete-section.mjs
      - ./page-detail-tools/update-section.mjs
      - ./page-detail-tools/move-section.mjs
