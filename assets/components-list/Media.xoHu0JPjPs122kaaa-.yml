id: xoHu0JPjPs122kaaa-
createdAt: 2025-03-21T08:03:15.003Z
updatedAt: 2025-08-22T08:36:03.255Z
name: Media
description: 一个通用的媒体组件
properties:
  7m5pz8nefl5j9hqq:
    index: 0
    data:
      id: 7m5pz8nefl5j9hqq
      key: bg
      type: url
      locales:
        zh:
          name: Media
        en:
          defaultValue:
            url: https://www.staging.arcblock.io/image-bin/uploads/4c5e7bad780804f037de3408c2955398.jpeg
            mediaKitUrl: https://www.staging.arcblock.io/image-bin/uploads/4c5e7bad780804f037de3408c2955398.jpeg
  70d4dvbqgjal3z6j:
    index: 2
    data:
      id: 70d4dvbqgjal3z6j
      key: backgroundColor
      type: color
      locales:
        zh:
          defaultValue: ""
          name: Background Color
        en:
          defaultValue: ""
  x8beiec3fxx5des1:
    index: 3
    data:
      id: x8beiec3fxx5des1
      key: width
      locales:
        zh:
          defaultValue: 100%
  5fjm8opvqth7wk71:
    index: 4
    data:
      id: 5fjm8opvqth7wk71
      key: height
      locales:
        zh:
          defaultValue: 100%
  dxn6zvv5bn6dn3mr:
    index: 6
    data:
      id: dxn6zvv5bn6dn3mr
      key: objectFit
      locales:
        zh:
          defaultValue: cover
      visible: false
  02dp1e6zfq2xwkt3:
    index: 5
    data:
      id: 02dp1e6zfq2xwkt3
      key: ratio
      locales:
        zh:
          defaultValue: auto
      visible: false
  8k3m9xp2vw7q4n1z:
    index: 1
    data:
      id: 8k3m9xp2vw7q4n1z
      key: previewImage
      type: url
      visible: true
      locales:
        zh:
          name: 预览图片
          defaultValue:
            url: null
            mediaKitUrl: null
            width: null
            height: null
        en:
          name: Preview Image
          defaultValue:
            url: null
            mediaKitUrl: null
            width: null
            height: null
llmConfig:
  properties:
    7m5pz8nefl5j9hqq:
      key: bg
      isNeedGenerate: true
      describe: 图片地址，需要 http 或者 https 或者 base64 格式
      displayName: Media
    70d4dvbqgjal3z6j:
      key: backgroundColor
      isNeedGenerate: true
      describe: 图片背景颜色
      displayName: Media Background Color
    5fjm8opvqth7wk71:
      key: height
      isNeedGenerate: false
      describe: 图片高度
      displayName: height
    x8beiec3fxx5des1:
      key: width
      isNeedGenerate: false
      describe: 图片高度
      displayName: width
    8k3m9xp2vw7q4n1z:
      key: previewImage
      isNeedGenerate: true
      describe: 预览图片，用于图片的背景模糊效果或视频的封面图
      displayName: 预览图片
version: 2
renderer:
  script: |
    const r = __PAGES_KIT_BUILTIN_MODULES__.require("@blocklet/pages-kit/builtin/react").default;
    const { Box: l, Skeleton: S, CardMedia: x } = __PAGES_KIT_BUILTIN_MODULES__.require("@blocklet/pages-kit/builtin/mui/material");
    const { jsx: a, jsxs: z } = __PAGES_KIT_BUILTIN_MODULES__.require("@blocklet/pages-kit/builtin/react");
    const P = [{ value: "auto", label: "Auto (Original)", ratio: null }, { value: "1:1", label: "1:1 (Square)", ratio: 1 }, { value: "4:3", label: "4:3 (Traditional)", ratio: 4 / 3 }, { value: "3:2", label: "3:2 (Photo)", ratio: 3 / 2 }, { value: "16:9", label: "16:9 (Widescreen)", ratio: 16 / 9 }, { value: "21:9", label: "21:9 (Ultrawide)", ratio: 21 / 9 }, { value: "2:1", label: "2:1 (Banner)", ratio: 2 / 1 }, { value: "1:2", label: "1:2 (Portrait)", ratio: 1 / 2 }, { value: "3:1", label: "3:1 (Wide)", ratio: 3 / 1 }];
    function A({ bg: o, backgroundColor: u, height: h = "100%", width: g = "100%", previewImage: e, ratio: w = "auto", objectFit: s = "cover" }) {
        const [p, y] = r.useState(!1), [m, d] = r.useState(!0), [f, C] = r.useState(!1), c = ((t) => {
            const n = P.find((k) => k.value === t);
            return n ? n.ratio : null;
        })(w), i = r.useMemo(() => (o === null || o === void 0 ? void 0 : o.url) ? [".mp4", ".webm", ".ogg", ".mov", ".avi", ".mkv"].some((t) => o.url.toLowerCase().includes(t)) : !1, [o === null || o === void 0 ? void 0 : o.url]), I = () => {
            d(!1);
        }, v = () => {
            y(!0), d(!1);
        }, j = () => {
            C(!0), d(!1);
        }, b = r.useMemo(() => {
            const t = { position: "relative", width: g, overflow: "hidden" };
            if (c)
                return Object.assign(Object.assign({}, t), { aspectRatio: c, height: "auto" });
            if (i && (e === null || e === void 0 ? void 0 : e.width) && (e === null || e === void 0 ? void 0 : e.height)) {
                const n = e.width / e.height;
                return Object.assign(Object.assign({}, t), { aspectRatio: n, height: "auto" });
            }
            return Object.assign(Object.assign({}, t), { height: h, minHeight: i ? "200px" : "auto" });
        }, [g, h, c, i, e]);
        return !(o === null || o === void 0 ? void 0 : o.url) || p ? a(l, { sx: b, children: a(l, { sx: { width: "100%", height: "100%", backgroundColor: u || "background.default", display: "flex", alignItems: "center", justifyContent: "center", minHeight: "100px" }, children: a(l, { sx: { textAlign: "center", color: "#999", fontSize: "14px" }, children: p ? `${i ? "Video" : "Image"} failed to load` : "" }) }) }) : z(l, { sx: b, children: [m && !(e === null || e === void 0 ? void 0 : e.url) && a(S, { variant: "rectangular", sx: { width: "100%", height: "100%", position: "absolute", top: 0, left: 0, zIndex: -1 } }), (e === null || e === void 0 ? void 0 : e.url) && a(x, { component: "img", image: e.url, alt: "Preview", sx: { position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: s, opacity: i && f ? 0 : 1, transition: "opacity 0.5s ease", zIndex: -1 } }), i ? a(l, { component: "video", src: o.url, autoPlay: !0, muted: !0, loop: !0, playsInline: !0, poster: (e === null || e === void 0 ? void 0 : e.url) || void 0, onCanPlay: j, onError: v, sx: { width: "100%", height: "100%", objectFit: s, backgroundColor: u, opacity: f || !(e === null || e === void 0 ? void 0 : e.url) ? 1 : 0, transition: "opacity 0.5s ease", position: "relative", zIndex: 1 } }) : a(x, { component: "img", image: o.url, alt: "Image", loading: "lazy", onLoad: I, onError: v, sx: { width: "100%", height: "100%", objectFit: s, backgroundColor: u, opacity: m ? 0 : 1, transition: "opacity 0.3s ease", position: "relative", zIndex: (e === null || e === void 0 ? void 0 : e.url) ? 2 : 1 } })] });
    }
    export { A as default };
  type: react-component
  chunks: []
  cjsScript: |
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    exports.default = A;
    const r = __PAGES_KIT_BUILTIN_MODULES__.require("@blocklet/pages-kit/builtin/react").default;
    const { Box: l, Skeleton: S, CardMedia: x } = __PAGES_KIT_BUILTIN_MODULES__.require("@blocklet/pages-kit/builtin/mui/material");
    const { jsx: a, jsxs: z } = __PAGES_KIT_BUILTIN_MODULES__.require("@blocklet/pages-kit/builtin/react");
    const P = [{ value: "auto", label: "Auto (Original)", ratio: null }, { value: "1:1", label: "1:1 (Square)", ratio: 1 }, { value: "4:3", label: "4:3 (Traditional)", ratio: 4 / 3 }, { value: "3:2", label: "3:2 (Photo)", ratio: 3 / 2 }, { value: "16:9", label: "16:9 (Widescreen)", ratio: 16 / 9 }, { value: "21:9", label: "21:9 (Ultrawide)", ratio: 21 / 9 }, { value: "2:1", label: "2:1 (Banner)", ratio: 2 / 1 }, { value: "1:2", label: "1:2 (Portrait)", ratio: 1 / 2 }, { value: "3:1", label: "3:1 (Wide)", ratio: 3 / 1 }];
    function A({ bg: o, backgroundColor: u, height: h = "100%", width: g = "100%", previewImage: e, ratio: w = "auto", objectFit: s = "cover" }) {
        const [p, y] = r.useState(!1), [m, d] = r.useState(!0), [f, C] = r.useState(!1), c = ((t) => {
            const n = P.find((k) => k.value === t);
            return n ? n.ratio : null;
        })(w), i = r.useMemo(() => (o === null || o === void 0 ? void 0 : o.url) ? [".mp4", ".webm", ".ogg", ".mov", ".avi", ".mkv"].some((t) => o.url.toLowerCase().includes(t)) : !1, [o === null || o === void 0 ? void 0 : o.url]), I = () => {
            d(!1);
        }, v = () => {
            y(!0), d(!1);
        }, j = () => {
            C(!0), d(!1);
        }, b = r.useMemo(() => {
            const t = { position: "relative", width: g, overflow: "hidden" };
            if (c)
                return Object.assign(Object.assign({}, t), { aspectRatio: c, height: "auto" });
            if (i && (e === null || e === void 0 ? void 0 : e.width) && (e === null || e === void 0 ? void 0 : e.height)) {
                const n = e.width / e.height;
                return Object.assign(Object.assign({}, t), { aspectRatio: n, height: "auto" });
            }
            return Object.assign(Object.assign({}, t), { height: h, minHeight: i ? "200px" : "auto" });
        }, [g, h, c, i, e]);
        return !(o === null || o === void 0 ? void 0 : o.url) || p ? a(l, { sx: b, children: a(l, { sx: { width: "100%", height: "100%", backgroundColor: u || "background.default", display: "flex", alignItems: "center", justifyContent: "center", minHeight: "100px" }, children: a(l, { sx: { textAlign: "center", color: "#999", fontSize: "14px" }, children: p ? `${i ? "Video" : "Image"} failed to load` : "" }) }) }) : z(l, { sx: b, children: [m && !(e === null || e === void 0 ? void 0 : e.url) && a(S, { variant: "rectangular", sx: { width: "100%", height: "100%", position: "absolute", top: 0, left: 0, zIndex: -1 } }), (e === null || e === void 0 ? void 0 : e.url) && a(x, { component: "img", image: e.url, alt: "Preview", sx: { position: "absolute", top: 0, left: 0, width: "100%", height: "100%", objectFit: s, opacity: i && f ? 0 : 1, transition: "opacity 0.5s ease", zIndex: -1 } }), i ? a(l, { component: "video", src: o.url, autoPlay: !0, muted: !0, loop: !0, playsInline: !0, poster: (e === null || e === void 0 ? void 0 : e.url) || void 0, onCanPlay: j, onError: v, sx: { width: "100%", height: "100%", objectFit: s, backgroundColor: u, opacity: f || !(e === null || e === void 0 ? void 0 : e.url) ? 1 : 0, transition: "opacity 0.5s ease", position: "relative", zIndex: 1 } }) : a(x, { component: "img", image: o.url, alt: "Image", loading: "lazy", onLoad: I, onError: v, sx: { width: "100%", height: "100%", objectFit: s, backgroundColor: u, opacity: m ? 0 : 1, transition: "opacity 0.3s ease", position: "relative", zIndex: (e === null || e === void 0 ? void 0 : e.url) ? 2 : 1 } })] });
    }
  editComponent: |
    var __rest = (this && this.__rest) || function (s, e) {
        var t = {};
        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
            t[p] = s[p];
        if (s != null && typeof Object.getOwnPropertySymbols === "function")
            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
                if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                    t[p[i]] = s[p[i]];
            }
        return t;
    };
    const d = __PAGES_KIT_BUILTIN_MODULES__.require("@blocklet/pages-kit/builtin/react").default;
    const { Box: s, FormControl: r, InputLabel: n, Select: u, MenuItem: c } = __PAGES_KIT_BUILTIN_MODULES__.require("@blocklet/pages-kit/builtin/mui/material");
    const { jsxs: i, jsx: l } = __PAGES_KIT_BUILTIN_MODULES__.require("@blocklet/pages-kit/builtin/react");
    const h = [{ value: "auto", label: "Auto (Original)", ratio: null }, { value: "1:1", label: "1:1 (Square)", ratio: 1 }, { value: "4:3", label: "4:3 (Traditional)", ratio: 4 / 3 }, { value: "3:2", label: "3:2 (Photo)", ratio: 3 / 2 }, { value: "16:9", label: "16:9 (Widescreen)", ratio: 16 / 9 }, { value: "21:9", label: "21:9 (Ultrawide)", ratio: 21 / 9 }, { value: "2:1", label: "2:1 (Banner)", ratio: 2 / 1 }, { value: "1:2", label: "1:2 (Portrait)", ratio: 1 / 2 }, { value: "3:1", label: "3:1 (Wide)", ratio: 3 / 1 }], C = (_a) => {
        var { onChange: t } = _a, a = __rest(_a, ["onChange"]);
        const o = d.useCallback((e) => {
            if (!t)
                return;
            const b = Object.assign(Object.assign({}, a), e);
            t(b);
        }, [t, a]), v = [{ value: "cover", label: "Cover (Fill with crop)" }, { value: "contain", label: "Contain (Fit without crop)" }, { value: "fill", label: "Fill (Stretch to fit)" }, { value: "scale-down", label: "Scale Down" }, { value: "none", label: "None (Original size)" }];
        return i(s, { sx: { display: "flex", flexDirection: "column", gap: 2 }, children: [i(r, { fullWidth: !0, size: "small", children: [l(n, { children: "Aspect Ratio" }), l(u, { value: a.ratio || "auto", label: "Aspect Ratio", onChange: (e) => o({ ratio: e.target.value }), children: h.map((e) => l(c, { value: e.value, children: e.label }, e.value)) })] }), i(r, { fullWidth: !0, size: "small", children: [l(n, { children: "Media Fit" }), l(u, { value: a.objectFit || "cover", label: "Media Fit", onChange: (e) => o({ objectFit: e.target.value }), children: v.map((e) => l(c, { value: e.value, children: e.label }, e.value)) })] })] });
    };
    export { C as EditComponent };
